// idle
hyper key down
    go to -waitMappedDown-
        action: discard key


// waitMappedDown                                               // waitMappedDownSpaceEmitted
hyper key up                                                    * hyper key up
    go to -idle-                                                    * go to -idle-
        action: tap hyper key                                           * action: nothing (hyper key emitted flag)
mapped key up                                                   * mapped key up
other key up                                                    * other key up
    go to -here-                                                    * go to -here-
        action: nothing                                                 * action: nothing
mapped key down                                                 * mapped key down
    go to -waitMappedUp-                                            * go to -waitMappedUpSpaceEmitted-
        action: save key                                                * action: save key
other key down                                                  * other key down
    go to -waitMappedDownSpaceEmitted-                              * go to -here-
        action: tap hyper key                                           action: nothing (hyper key emitted flag)



// waitMappedUp                                                 // waitMappedUpSpaceEmitted 
hyper key up                                                    hyper key up
    go to -idle-                                                    go to -idle-
        action: emit hyper down, saved, hyper up                        action: emit saved, emit hyper up
mapped key up                                                   mapped key up
mapped key down                                                 mapped key down
    go to -mapping-                                                 go to -mapping-
        action: convert saved, emit, convert key, save key              action: convert saved, emit, convert key, save key
other key up                                                    other key up
    go to -waitMappedUpSpaceEmitted-                                go to -here-
        action: emit hyper down, saved                                  action: nothing
other key down                                                  other key down
    go to -idle-                                                    go to -idle-
        action: emit hyper down, saved                                  action: emit hyper down, saved



// mapping
hyper key up
    go to -idle-
        action: emit converted up for saved keys, discard key
mapped key up
mapped key down
    go to -here-
        action: convert key, save key
other key up
other key down
    go to -here-
        action: nothing
