// idle
{activationDown, waitMappedDown, discardKey},


// waitMappedDown
- {activationDown, self, discardKey}, not possible?
+ {activationUp, idle, tapActivationKey},
+ {mappedKeyUp, self, 0},
+ {otherKeyUp, self, 0},
+ {mappedKeyDown, waitMappedUp, delayKeyDown},
+ {otherKeyDown, waitMappedDownSpaceEmitted, activationKeyDownThenKey}, 


// waitMappedDownSpaceEmitted
- {activationDown, self, discardKey}, not possible?
+ {activationUp, idle, 0},
+ {mappedKeyUp, self, 0},
+ {otherKeyDown, self, 0},
+ {otherKeyUp, self, 0},
+ {mappedKeyDown, waitMappedUpSpaceEmitted, delayKeyDown},


// waitMappedUp (still might emit the activation key)
- {activationDown, self, discardKey}, not possible?
+ {activationUp, idle, emitActDownSavedDownActUp},
+ {otherKeyDown, idle, emitActSavedAndCurrentDown},
+ {otherKeyUp, waitMappedUpSpaceEmitted, emitActSavedAndCurrentUp},
+ {mappedKeyDown, mapping, mapSavedAndMapCurrentDown},
+ {mappedKeyUp, mapping, mapSavedAndMapCurrentUp},


// waitMappedUpSpaceEmitted
- {activationDown, self, discardKey}, not possible?
+ {activationUp, idle, emitSavedDownAndActUp},
+ {otherKeyDown, idle, emitSavedAndCurrentDown},
+ {otherKeyUp, self, 0},
+ {mappedKeyDown, mapping, mapSavedAndMapCurrentDown},
+ {mappedKeyUp, mapping, mapSavedAndMapCurrentUp},


// mapping (definitely eaten the activation key)
- {activationDown, self, discardKey}, not possible?
+ {activationUp, idle, discardKeyAndReleaseMappedKeys},
+ {mappedKeyDown, self, mapKeyDown},
+ {mappedKeyUp, self, mapKeyUp},
+ {otherKeyDown, self, 0},
+ {otherKeyUp, self, 0},


can combine waitMappedDown and waitMappedDownSpaceEmitted
can combine waitMappedUp and waitMappedUpSpaceEmitted